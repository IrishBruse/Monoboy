static Emulator emulator = new();

static Color[] lut = new Color[] { Color.White, Color.Gray, Color.DarkGray, Color.Black };
static StringBuilder buff = new(Emulator.WindowHeight * Emulator.WindowWidth);

public static void Main(string[] args)
{
    int cols = Console.WindowWidth, rows = Console.WindowHeight;
    //some sample text

    //because output appends, ensure the window is reset



    if (args.Length == 1 && File.Exists(args[0]))
    {
        emulator.Open(args[0]);
    }

    emulator.Open("C:\\Users\\Econn\\Desktop\\Tetris.gb");

    emulator.ppu.DrawFrame += () => Render();

    while (true)
    {
        int cycles = 0;
        while (cycles < Emulator.CyclesPerFrame)
        {
            cycles += emulator.Step();
        }
        Thread.Sleep(15);
    }
}
